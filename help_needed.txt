Collapse depending on map width:

How to get size of top right corner control if it would be / is open?
(It is always 0, asynchron?)
//console.log(map._controlCorners.topright);

let maxcontrolwidth = 0;
for(var i=0, len=controlwitdh.length; i<len; i++)       {
  var computed = getComputedStyle( controlwitdh[i], null );
  var width = parseInt(computed.getPropertyValue( "width" ));
  if (width > maxcontrolwidth) {
    maxcontrolwidth = width;
  }
}

// Width of map (ok)
let leafletwidth = map.getSize().x;

var collapse = false;
if (leafletwidth/5 < maxcontrolwidth) {
  collapse = true;
}

in layerswitch.php:
L.control.layers(baselayers,overlays,{collapsed: collapse} ).addTo(map);
if ( Object.entries(opacity).length !==  0) {
  L.control.opacity(opacity, {collapsed: collapse}).addTo(map);
}

in multielevation.php:
},
legend_options:{
  collapsed: collapse,
},
filename_option: ';
